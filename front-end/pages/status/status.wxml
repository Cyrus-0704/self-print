<!--pages/status/status.wxml-->
<view class="container">
  <view class="status-card">
    <view class="status-header">
      <text class="order-id">订单号：{{orderId}}</text>
      <text class="status-text {{status}}">{{statusText[status]}}</text>
    </view>

    <view class="progress-section">
      <progress percent="{{progress}}" stroke-width="12" 
                color="{{status === 'failed' ? '#ff4d4f' : '#07c160'}}"
                active="{{status === 'printing'}}"
                active-mode="forwards"/>
      <text class="progress-text">{{progress}}%</text>
    </view>

    <view class="print-info">
      <view class="info-item">
        <text class="info-label">打印位置</text>
        <text class="info-value">{{printInfo.location}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">预计用时</text>
        <text class="info-value">{{printInfo.estimatedTime}}</text>
      </view>
    </view>

    <view class="error-message" wx:if="{{status === 'failed'}}">
      <text>{{errorMessage || '打印遇到问题，请重试'}}</text>
    </view>
  </view>

  <view class="action-area">
    <block wx:if="{{status === 'completed'}}">
      <button class="action-btn primary" bindtap="backToHome">返回首页</button>
    </block>
    <block wx:elif="{{status === 'failed'}}">
      <button class="action-btn" bindtap="backToHome">返回首页</button>
      <button class="action-btn primary" bindtap="retryPrint">重新打印</button>
    </block>
  </view>

  <view class="notice" wx:if="{{status === 'pending' || status === 'printing'}}">
    <text class="notice-text">打印完成后将通过微信消息通知您</text>
  </view>
</view>