<!--pages/payment/payment.wxml-->
<view class="container">
  <view class="status-icon" wx:if="{{paymentStatus}}">
    <icon type="{{paymentStatus === 'success' ? 'success' : 'warn'}}" 
          size="64" color="{{paymentStatus === 'success' ? '#07c160' : '#ff4d4f'}}"/>
    <text class="status-text">{{paymentStatus === 'success' ? '支付成功' : '支付失败'}}</text>
  </view>

  <view class="order-info">
    <view class="info-item">
      <text class="label">订单号</text>
      <text class="value">{{orderInfo.orderId}}</text>
    </view>
    <view class="info-item">
      <text class="label">创建时间</text>
      <text class="value">{{orderInfo.createTime}}</text>
    </view>
    <view class="info-item">
      <text class="label">支付金额</text>
      <text class="value price">¥{{orderInfo.totalPrice}}</text>
    </view>
  </view>

  <view class="payment-method">
    <view class="method-title">支付方式</view>
    <view class="method-item">
      <image class="method-icon" src="/images/wechat-pay.png"></image>
      <text class="method-name">微信支付</text>
      <text class="method-selected">√</text>
    </view>
  </view>

  <view class="action-area">
    <block wx:if="{{!paymentStatus}}">
      <button class="cancel-btn" bindtap="cancelPayment" 
              disabled="{{loading}}">取消支付</button>
      <button class="pay-btn" bindtap="startPayment" 
              loading="{{loading}}" disabled="{{loading}}">
        确认支付
      </button>
    </block>
    <block wx:elif="{{paymentStatus === 'fail'}}">
      <button class="retry-btn" bindtap="retryPayment">重新支付</button>
    </block>
  </view>

  <view class="notice">
    <text class="notice-text">支付即代表同意《打印服务协议》</text>
  </view>

  <view class="loading-mask" wx:if="{{loading}}">
    <view class="loading-content">
      <view class="loading-icon"></view>
      <text class="loading-text">处理中...</text>
    </view>
  </view>
</view>